<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>9MM ‚Äî 21 Jours Streak Tracker</title>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com"></script>
<style>
:root{--red:#FF1717;--cyan:#00EDEF;--black:#0a0a0a}
body{font-family:'Inter',sans-serif;background:var(--black);color:#fff;margin:0;min-height:100vh;overflow-x:hidden}
.font-oswald{font-family:'Oswald',sans-serif}
@keyframes border-beam{0%{transform:translateY(-100%)}100%{transform:translateY(100vh)}}
@keyframes fadeSlideBlurIn{0%{opacity:0;transform:translateY(20px);filter:blur(8px)}100%{opacity:1;transform:translateY(0);filter:blur(0)}}
@keyframes flamePulse{0%,100%{transform:scale(1)}50%{transform:scale(1.15)}}
@keyframes badgeReveal{0%{opacity:0;transform:scale(.5) rotate(-10deg)}100%{opacity:1;transform:scale(1) rotate(0deg)}}
.fade-in{animation:fadeSlideBlurIn .8s cubic-bezier(.16,1,.3,1) both}
.delay-1{animation-delay:.15s}.delay-2{animation-delay:.3s}
*,*::before,*::after{box-sizing:border-box}
.form-group{display:flex;flex-direction:column;gap:6px}
.form-group label{font-size:11px;font-weight:600;letter-spacing:.08em;text-transform:uppercase;color:rgba(255,255,255,.4)}
.form-group input{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);color:#fff;padding:14px 16px;border-radius:12px;width:100%;font-size:16px;outline:none;transition:all .3s ease;backdrop-filter:blur(6px)}
.form-group input::placeholder{color:rgba(255,255,255,.25)}
.form-group input:focus{border-color:var(--cyan);background:rgba(255,255,255,.09);box-shadow:0 0 0 3px rgba(0,237,239,.1)}
.glass-card{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);border-radius:16px;backdrop-filter:blur(10px);overflow:hidden;position:relative}
.btn-cyan{background:linear-gradient(135deg,var(--cyan),#00b8ba);color:#000;font-weight:700;padding:16px;border-radius:12px;border:none;cursor:pointer;font-size:1.05rem;transition:all .3s;width:100%}
.btn-cyan:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(0,237,239,.3)}
.btn-dual{background:linear-gradient(135deg,var(--red),var(--cyan));color:#fff;font-weight:700;padding:16px;border-radius:12px;border:none;cursor:pointer;font-size:1.05rem;transition:all .3s;width:100%}
@media(max-width:640px){.glass-card{border-radius:12px}main{padding-left:16px;padding-right:16px}}

.day-cell{border-radius:12px;padding:12px;text-align:center;transition:all .3s;cursor:pointer;position:relative}
.day-cell.future{background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.04);opacity:.4;cursor:default}
.day-cell.available{background:rgba(255,255,255,.03);border:1px dashed rgba(0,237,239,.15)}
.day-cell.available:hover{background:rgba(0,237,239,.05);border-color:rgba(0,237,239,.25)}
.day-cell.completed{background:rgba(0,237,239,.08);border:1px solid rgba(0,237,239,.2)}
.day-cell.missed{background:rgba(255,23,23,.05);border:1px solid rgba(255,23,23,.1)}

.habit-check{display:flex;align-items:center;gap:10px;padding:10px 14px;border-radius:10px;cursor:pointer;transition:all .2s;user-select:none;-webkit-user-select:none}
.habit-check.unchecked{background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.06)}
.habit-check.unchecked:hover{background:rgba(255,255,255,.04)}
.habit-check.checked{background:rgba(0,237,239,.08);border:1px solid rgba(0,237,239,.15)}
.habit-box{width:22px;height:22px;border-radius:6px;border:2px solid rgba(255,255,255,.15);display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all .2s}
.habit-check.checked .habit-box{background:var(--cyan);border-color:var(--cyan)}

.badge{width:80px;height:80px;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-direction:column;font-size:32px;transition:all .3s}
.badge.locked{background:rgba(255,255,255,.03);border:2px solid rgba(255,255,255,.06);opacity:.3;filter:grayscale(1)}
.badge.unlocked{border:2px solid rgba(0,237,239,.3);animation:badgeReveal .6s ease both}
.flame{animation:flamePulse 1.5s ease infinite}
</style>
</head>
<body>
<div class="fixed z-0 pointer-events-none flex max-w-6xl border-x border-white/5 mx-auto px-4 top-0 right-0 bottom-0 left-0 justify-between">
<div class="w-px h-full bg-white/5 relative overflow-hidden"><div class="absolute top-0 left-0 w-full h-[200px] bg-gradient-to-b from-transparent via-[rgba(0,237,239,.4)] to-transparent animate-[border-beam_5s_linear_infinite]"></div></div>
<div class="w-px h-full bg-white/5 hidden md:block relative overflow-hidden"><div class="absolute top-0 left-0 w-full h-[200px] bg-gradient-to-b from-transparent via-[rgba(0,237,239,.4)] to-transparent animate-[border-beam_7s_linear_infinite_2s]"></div></div>
<div class="w-px h-full bg-white/5 hidden lg:block relative overflow-hidden"><div class="absolute top-0 left-0 w-full h-[200px] bg-gradient-to-b from-transparent via-[rgba(0,237,239,.4)] to-transparent animate-[border-beam_5s_linear_infinite_4s]"></div></div>
<div class="w-px h-full bg-white/5 relative overflow-hidden"><div class="absolute top-0 left-0 w-full h-[200px] bg-gradient-to-b from-transparent via-[rgba(0,237,239,.4)] to-transparent animate-[border-beam_8s_linear_infinite_1s]"></div></div>
</div>

<header class="relative z-10 text-center pt-10 pb-4">
<div class="inline-flex items-center gap-3"><span class="font-oswald text-3xl font-bold tracking-wider">9MM</span><span class="text-[10px] text-white/30 tracking-[.3em] uppercase mt-1">Beyond ‚òÖ Energy</span></div>
<div style="width:50px;height:3px;background:linear-gradient(90deg,var(--red),var(--cyan));margin:10px auto 0;border-radius:99px"></div>
</header>

<main class="max-w-3xl mx-auto px-5 pb-16 relative z-10">
<!-- EMAIL GATE (first) -->
<div id="gate-screen" class="fade-in">
<div class="text-center mb-8">
<span class="inline-block text-xs tracking-[.3em] uppercase px-3 py-1 rounded-full mb-4" style="background:linear-gradient(135deg,rgba(255,23,23,.08),rgba(0,237,239,.08));color:#fff;border:1px solid rgba(255,255,255,.1)">CHALLENGE HABITUDES</span>
<h1 class="font-oswald text-4xl md:text-5xl font-bold uppercase leading-[.9] mb-3">21 Jours<br/><span style="background:linear-gradient(90deg,var(--red),var(--cyan));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text">Sans Excuses</span></h1>
<p class="text-white/45 max-w-md mx-auto mb-2">Installe les habitudes qui changent tout. Check-in quotidien, streak counter, badges a debloquer.</p>
</div>

<div class="grid md:grid-cols-2 gap-6 mb-8">
<div class="glass-card p-5 text-center"><span style="font-size:36px" class="flame">üî•</span><h3 class="font-oswald text-lg font-bold mt-2">Streak Counter</h3><p class="text-white/35 text-xs mt-1">Ta flamme grandit chaque jour. Ne la laisse pas s'eteindre.</p></div>
<div class="glass-card p-5 text-center"><span style="font-size:36px">üèÖ</span><h3 class="font-oswald text-lg font-bold mt-2">Badges a debloquer</h3><p class="text-white/35 text-xs mt-1">7 jours, 14 jours, 21 jours ‚Äî chaque palier debloque un badge.</p></div>
</div>

<div class="glass-card p-8 text-center" style="border-color:rgba(0,237,239,.1);box-shadow:0 0 60px rgba(0,237,239,.06)">
<p class="font-oswald text-xl font-bold uppercase mb-1">Commence ton challenge</p>
<p class="text-white/35 text-sm mb-6">Gratuit. Progres sauvegardes. Pas de spam.</p>
<form id="lead-form" onsubmit="captureEmail(event)" class="space-y-4 max-w-xs mx-auto">
<div class="form-group"><label>Ton prenom</label><input type="text" name="name" placeholder="Ton prenom" required/></div>
<div class="form-group"><label>Ton email</label><input type="email" name="email" placeholder="Ton email" required/></div>
<button type="submit" class="btn-dual">COMMENCER LE CHALLENGE ‚Üí</button>
</form>
</div>
</div>

<!-- TRACKER (after email) -->
<div id="tracker-screen" style="display:none">
<!-- Streak header -->
<div class="text-center mb-6">
<div class="flame" style="font-size:48px" id="flame-icon">üî•</div>
<span class="font-oswald text-5xl font-bold" style="color:var(--cyan)" id="streak-count">0</span>
<span class="text-white/30 text-sm block mt-1">jours de streak</span>
<div class="h-1.5 rounded-full bg-white/5 max-w-xs mx-auto mt-3 overflow-hidden"><div id="streak-bar" class="h-full rounded-full" style="width:0%;background:linear-gradient(90deg,var(--red),var(--cyan));transition:width .5s"></div></div>
<span class="text-[10px] text-white/20 mt-1 block" id="streak-label">0 / 21 jours</span>
</div>

<!-- Badges -->
<div class="flex justify-center gap-4 mb-6">
<div class="text-center"><div class="badge locked" id="badge-7"><span>ü•â</span></div><span class="text-[10px] text-white/20 block mt-2">7 jours</span></div>
<div class="text-center"><div class="badge locked" id="badge-14"><span>ü•à</span></div><span class="text-[10px] text-white/20 block mt-2">14 jours</span></div>
<div class="text-center"><div class="badge locked" id="badge-21"><span>ü•á</span></div><span class="text-[10px] text-white/20 block mt-2">21 jours</span></div>
</div>

<!-- Today's check-in -->
<div class="glass-card p-6 mb-6" id="checkin-card">
<h3 class="font-oswald text-lg font-bold uppercase mb-1">Check-in du jour</h3>
<p class="text-white/30 text-xs mb-4" id="today-date">‚Äî</p>
<div class="space-y-2" id="habits-list">
<div class="habit-check unchecked" data-habit="sport" onclick="toggleHabit(this)"><div class="habit-box"></div><span class="text-sm">üèãÔ∏è Activite physique (30+ min)</span></div>
<div class="habit-check unchecked" data-habit="hydrate" onclick="toggleHabit(this)"><div class="habit-box"></div><span class="text-sm">üíß Hydratation (2L+ d'eau)</span></div>
<div class="habit-check unchecked" data-habit="nutrition" onclick="toggleHabit(this)"><div class="habit-box"></div><span class="text-sm">ü•ó Nutrition equilibree (3 repas)</span></div>
<div class="habit-check unchecked" data-habit="sleep" onclick="toggleHabit(this)"><div class="habit-box"></div><span class="text-sm">üò¥ Sommeil 7h+ la nuit derniere</span></div>
<div class="habit-check unchecked" data-habit="focus" onclick="toggleHabit(this)"><div class="habit-box"></div><span class="text-sm">üß† Session focus (sans distractions)</span></div>
</div>
<div class="mt-4 text-center">
<button id="validate-btn" onclick="validateDay()" class="btn-cyan" style="max-width:250px;margin:0 auto" disabled>VALIDER MA JOURNEE</button>
<p class="text-[10px] text-white/20 mt-2">Minimum 3/5 habitudes pour valider</p>
</div>
</div>

<!-- Calendar grid -->
<div class="glass-card p-5">
<h3 class="font-oswald text-sm font-bold uppercase mb-3 text-white/50">Calendrier 21 jours</h3>
<div class="grid grid-cols-7 gap-2" id="calendar-grid"></div>
</div>
</div>
</main>

<footer class="relative z-10 text-center py-8 mt-8">
<div class="max-w-md mx-auto border-t border-white/5 pt-6"><span class="font-oswald text-lg font-bold text-white/40">9MM</span><span class="text-[9px] text-white/20 tracking-[.2em] uppercase ml-2">Beyond Energy</span><p class="text-white/20 text-xs mt-2">&copy; 2026 9MM Suisse SA</p></div>
</footer>

<script>
const STORAGE_KEY='9mm-streak-tracker';
let data=JSON.parse(localStorage.getItem(STORAGE_KEY)||'null');

function initData(){
  if(!data){data={startDate:new Date().toISOString().split('T')[0],days:{},streak:0};}
  save();
}

function save(){localStorage.setItem(STORAGE_KEY,JSON.stringify(data));}

function captureEmail(e){
  e.preventDefault();
  const fd=new FormData(e.target);const d={};fd.forEach((v,k)=>d[k]=v);
  d.source='streak-tracker';d.timestamp=new Date().toISOString();
  console.log('9MM Lead captured:',d);
  initData();
  document.getElementById('gate-screen').style.display='none';
  document.getElementById('tracker-screen').style.display='block';
  render();
}

// Check if already started
if(data){
  document.getElementById('gate-screen').style.display='none';
  document.getElementById('tracker-screen').style.display='block';
  setTimeout(render,100);
}

function render(){
  const today=new Date().toISOString().split('T')[0];
  document.getElementById('today-date').textContent=new Date().toLocaleDateString('fr-FR',{weekday:'long',day:'numeric',month:'long'});

  // Calculate streak
  let streak=0;
  const start=new Date(data.startDate);
  for(let i=0;i<21;i++){
    const d=new Date(start);d.setDate(d.getDate()+i);
    const key=d.toISOString().split('T')[0];
    if(data.days[key]&&data.days[key].validated)streak=i+1;
    else if(d<new Date(today))break;
  }
  data.streak=streak;save();

  document.getElementById('streak-count').textContent=streak;
  document.getElementById('streak-bar').style.width=(streak/21*100)+'%';
  document.getElementById('streak-label').textContent=streak+' / 21 jours';

  // Flame size
  const flame=document.getElementById('flame-icon');
  flame.style.fontSize=Math.max(36,36+streak*2)+'px';

  // Badges
  ['7','14','21'].forEach(n=>{
    const b=document.getElementById('badge-'+n);
    if(streak>=parseInt(n)){b.className='badge unlocked';b.style.background='rgba(0,237,239,.1)';}
    else{b.className='badge locked';}
  });

  // Check if today already validated
  if(data.days[today]&&data.days[today].validated){
    document.getElementById('checkin-card').style.opacity='.5';
    document.getElementById('validate-btn').textContent='DEJA VALIDE ‚úÖ';
    document.getElementById('validate-btn').disabled=true;
    // Restore checks
    data.days[today].habits.forEach(h=>{
      const el=document.querySelector('[data-habit="'+h+'"]');
      if(el){el.className='habit-check checked';el.querySelector('.habit-box').innerHTML='<span style="color:#000;font-size:12px">‚úì</span>';}
    });
  }

  // Calendar
  const grid=document.getElementById('calendar-grid');grid.innerHTML='';
  for(let i=0;i<21;i++){
    const d=new Date(start);d.setDate(d.getDate()+i);
    const key=d.toISOString().split('T')[0];
    const cell=document.createElement('div');
    cell.className='day-cell ';
    if(data.days[key]&&data.days[key].validated){cell.className+='completed';cell.innerHTML='<span class="font-oswald text-sm font-bold" style="color:var(--cyan)">'+(i+1)+'</span><span style="font-size:10px">‚úÖ</span>';}
    else if(key<today){cell.className+='missed';cell.innerHTML='<span class="font-oswald text-sm font-bold text-white/20">'+(i+1)+'</span><span style="font-size:10px">‚ùå</span>';}
    else if(key===today){cell.className+='available';cell.innerHTML='<span class="font-oswald text-sm font-bold" style="color:var(--cyan)">'+(i+1)+'</span><span style="font-size:8px;color:var(--cyan)">AUJOURD\'HUI</span>';}
    else{cell.className+='future';cell.innerHTML='<span class="font-oswald text-sm font-bold text-white/15">'+(i+1)+'</span>';}
    grid.appendChild(cell);
  }
}

function toggleHabit(el){
  const today=new Date().toISOString().split('T')[0];
  if(data.days[today]&&data.days[today].validated)return;

  const isChecked=el.classList.contains('checked');
  if(isChecked){
    el.className='habit-check unchecked';
    el.querySelector('.habit-box').innerHTML='';
  }else{
    el.className='habit-check checked';
    el.querySelector('.habit-box').innerHTML='<span style="color:#000;font-size:12px">‚úì</span>';
  }

  const checked=document.querySelectorAll('.habit-check.checked').length;
  const btn=document.getElementById('validate-btn');
  btn.disabled=checked<3;
}

function validateDay(){
  const today=new Date().toISOString().split('T')[0];
  const habits=[];
  document.querySelectorAll('.habit-check.checked').forEach(el=>habits.push(el.dataset.habit));
  if(habits.length<3)return;

  if(!data.days[today])data.days[today]={};
  data.days[today].validated=true;
  data.days[today].habits=habits;
  data.days[today].time=new Date().toISOString();
  save();
  render();
}
</script>
</body>
</html>